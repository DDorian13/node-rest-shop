{"ast":null,"code":"import { useEffect } from 'react';\nimport useCheckAuth from './useCheckAuth';\nimport { useSafeSetState } from '../util/hooks';\nvar emptyParams = {};\n/**\r\n * Hook for getting the authentication status and restricting access to authenticated users\r\n *\r\n * Calls the authProvider.checkAuth() method asynchronously.\r\n * If the authProvider returns a rejected promise, logs the user out.\r\n *\r\n * The return value updates according to the authProvider request state:\r\n *\r\n * - start:   { authenticated: false, loading: true, loaded: false }\r\n * - success: { authenticated: true,  loading: false, loaded: true }\r\n * - error:   { authenticated: false, loading: false, loaded: true }\r\n *\r\n * Useful in custom page components that can work both for connected and\r\n * anonymous users. For pages that can only work for connected users,\r\n * prefer the useAuthenticated() hook.\r\n *\r\n * @see useAuthenticated()\r\n *\r\n * @param {Object} params Any params you want to pass to the authProvider\r\n *\r\n * @returns The current auth check state. Destructure as { authenticated, error, loading, loaded }.\r\n *\r\n * @example\r\n *     import { useAuthState } from 'react-admin';\r\n *\r\n *     const CustomRoutes = [\r\n *         <Route path=\"/bar\" render={() => {\r\n *              const { authenticated } = useAuthState({ myContext: 'foobar' });\r\n *              return authenticated ? <Bar /> : <BarNotAuthenticated />;\r\n *          }} />,\r\n *     ];\r\n *     const App = () => (\r\n *         <Admin customRoutes={customRoutes}>\r\n *             ...\r\n *         </Admin>\r\n *     );\r\n */\n\nvar useAuthState = function (params) {\n  if (params === void 0) {\n    params = emptyParams;\n  }\n\n  var _a = useSafeSetState({\n    loading: true,\n    loaded: false,\n    authenticated: true\n  }),\n      state = _a[0],\n      setState = _a[1];\n\n  var checkAuth = useCheckAuth();\n  useEffect(function () {\n    checkAuth(params, false).then(function () {\n      return setState({\n        loading: false,\n        loaded: true,\n        authenticated: true\n      });\n    }).catch(function () {\n      return setState({\n        loading: false,\n        loaded: true,\n        authenticated: false\n      });\n    });\n  }, [checkAuth, params, setState]);\n  return state;\n};\n\nexport default useAuthState;","map":{"version":3,"sources":["C:/Users/Felhasználó/IdeaProjects/node-rest-shop/client/node_modules/ra-core/esm/auth/useAuthState.js"],"names":["useEffect","useCheckAuth","useSafeSetState","emptyParams","useAuthState","params","_a","loading","loaded","authenticated","state","setState","checkAuth","then","catch"],"mappings":"AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,SAASC,eAAT,QAAgC,eAAhC;AACA,IAAIC,WAAW,GAAG,EAAlB;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,IAAIC,YAAY,GAAG,UAAUC,MAAV,EAAkB;AACjC,MAAIA,MAAM,KAAK,KAAK,CAApB,EAAuB;AAAEA,IAAAA,MAAM,GAAGF,WAAT;AAAuB;;AAChD,MAAIG,EAAE,GAAGJ,eAAe,CAAC;AACrBK,IAAAA,OAAO,EAAE,IADY;AAErBC,IAAAA,MAAM,EAAE,KAFa;AAGrBC,IAAAA,aAAa,EAAE;AAHM,GAAD,CAAxB;AAAA,MAIIC,KAAK,GAAGJ,EAAE,CAAC,CAAD,CAJd;AAAA,MAImBK,QAAQ,GAAGL,EAAE,CAAC,CAAD,CAJhC;;AAKA,MAAIM,SAAS,GAAGX,YAAY,EAA5B;AACAD,EAAAA,SAAS,CAAC,YAAY;AAClBY,IAAAA,SAAS,CAACP,MAAD,EAAS,KAAT,CAAT,CACKQ,IADL,CACU,YAAY;AAClB,aAAOF,QAAQ,CAAC;AAAEJ,QAAAA,OAAO,EAAE,KAAX;AAAkBC,QAAAA,MAAM,EAAE,IAA1B;AAAgCC,QAAAA,aAAa,EAAE;AAA/C,OAAD,CAAf;AACH,KAHD,EAIKK,KAJL,CAIW,YAAY;AACnB,aAAOH,QAAQ,CAAC;AAAEJ,QAAAA,OAAO,EAAE,KAAX;AAAkBC,QAAAA,MAAM,EAAE,IAA1B;AAAgCC,QAAAA,aAAa,EAAE;AAA/C,OAAD,CAAf;AACH,KAND;AAOH,GARQ,EAQN,CAACG,SAAD,EAAYP,MAAZ,EAAoBM,QAApB,CARM,CAAT;AASA,SAAOD,KAAP;AACH,CAlBD;;AAmBA,eAAeN,YAAf","sourcesContent":["import { useEffect } from 'react';\r\nimport useCheckAuth from './useCheckAuth';\r\nimport { useSafeSetState } from '../util/hooks';\r\nvar emptyParams = {};\r\n/**\r\n * Hook for getting the authentication status and restricting access to authenticated users\r\n *\r\n * Calls the authProvider.checkAuth() method asynchronously.\r\n * If the authProvider returns a rejected promise, logs the user out.\r\n *\r\n * The return value updates according to the authProvider request state:\r\n *\r\n * - start:   { authenticated: false, loading: true, loaded: false }\r\n * - success: { authenticated: true,  loading: false, loaded: true }\r\n * - error:   { authenticated: false, loading: false, loaded: true }\r\n *\r\n * Useful in custom page components that can work both for connected and\r\n * anonymous users. For pages that can only work for connected users,\r\n * prefer the useAuthenticated() hook.\r\n *\r\n * @see useAuthenticated()\r\n *\r\n * @param {Object} params Any params you want to pass to the authProvider\r\n *\r\n * @returns The current auth check state. Destructure as { authenticated, error, loading, loaded }.\r\n *\r\n * @example\r\n *     import { useAuthState } from 'react-admin';\r\n *\r\n *     const CustomRoutes = [\r\n *         <Route path=\"/bar\" render={() => {\r\n *              const { authenticated } = useAuthState({ myContext: 'foobar' });\r\n *              return authenticated ? <Bar /> : <BarNotAuthenticated />;\r\n *          }} />,\r\n *     ];\r\n *     const App = () => (\r\n *         <Admin customRoutes={customRoutes}>\r\n *             ...\r\n *         </Admin>\r\n *     );\r\n */\r\nvar useAuthState = function (params) {\r\n    if (params === void 0) { params = emptyParams; }\r\n    var _a = useSafeSetState({\r\n        loading: true,\r\n        loaded: false,\r\n        authenticated: true,\r\n    }), state = _a[0], setState = _a[1];\r\n    var checkAuth = useCheckAuth();\r\n    useEffect(function () {\r\n        checkAuth(params, false)\r\n            .then(function () {\r\n            return setState({ loading: false, loaded: true, authenticated: true });\r\n        })\r\n            .catch(function () {\r\n            return setState({ loading: false, loaded: true, authenticated: false });\r\n        });\r\n    }, [checkAuth, params, setState]);\r\n    return state;\r\n};\r\nexport default useAuthState;\r\n"]},"metadata":{},"sourceType":"module"}