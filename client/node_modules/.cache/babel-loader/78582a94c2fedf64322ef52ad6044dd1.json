{"ast":null,"code":"import { useEffect } from 'react';\nimport useGetPermissions from './useGetPermissions';\nimport { useSafeSetState } from '../util/hooks';\nvar emptyParams = {};\n/**\r\n * Hook for getting user permissions\r\n *\r\n * Calls the authProvider.getPrmissions() method asynchronously.\r\n * If the authProvider returns a rejected promise, returns empty permissions.\r\n *\r\n * The return value updates according to the request state:\r\n *\r\n * - start: { loading: true, loaded: false }\r\n * - success: { permissions: [any], loading: false, loaded: true }\r\n * - error: { error: [error from provider], loading: false, loaded: true }\r\n *\r\n * Useful to enable features based on user permissions\r\n *\r\n * @param {Object} params Any params you want to pass to the authProvider\r\n *\r\n * @returns The current auth check state. Destructure as { permissions, error, loading, loaded }.\r\n *\r\n * @example\r\n *     import { usePermissions } from 'react-admin';\r\n *\r\n *     const PostDetail = props => {\r\n *         const { loaded, permissions } = usePermissions();\r\n *         if (loaded && permissions == 'editor') {\r\n *             return <PostEdit {...props} />\r\n *         } else {\r\n *             return <PostShow {...props} />\r\n *         }\r\n *     };\r\n */\n\nvar usePermissions = function (params) {\n  if (params === void 0) {\n    params = emptyParams;\n  }\n\n  var _a = useSafeSetState({\n    loading: true,\n    loaded: false\n  }),\n      state = _a[0],\n      setState = _a[1];\n\n  var getPermissions = useGetPermissions();\n  useEffect(function () {\n    getPermissions(params).then(function (permissions) {\n      setState({\n        loading: false,\n        loaded: true,\n        permissions: permissions\n      });\n    }).catch(function (error) {\n      setState({\n        loading: false,\n        loaded: true,\n        error: error\n      });\n    });\n  }, [getPermissions, params, setState]);\n  return state;\n};\n\nexport default usePermissions;","map":{"version":3,"sources":["C:/Users/Felhasználó/IdeaProjects/node-rest-shop/client/node_modules/ra-core/esm/auth/usePermissions.js"],"names":["useEffect","useGetPermissions","useSafeSetState","emptyParams","usePermissions","params","_a","loading","loaded","state","setState","getPermissions","then","permissions","catch","error"],"mappings":"AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAOC,iBAAP,MAA8B,qBAA9B;AACA,SAASC,eAAT,QAAgC,eAAhC;AACA,IAAIC,WAAW,GAAG,EAAlB;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,IAAIC,cAAc,GAAG,UAAUC,MAAV,EAAkB;AACnC,MAAIA,MAAM,KAAK,KAAK,CAApB,EAAuB;AAAEA,IAAAA,MAAM,GAAGF,WAAT;AAAuB;;AAChD,MAAIG,EAAE,GAAGJ,eAAe,CAAC;AACrBK,IAAAA,OAAO,EAAE,IADY;AAErBC,IAAAA,MAAM,EAAE;AAFa,GAAD,CAAxB;AAAA,MAGIC,KAAK,GAAGH,EAAE,CAAC,CAAD,CAHd;AAAA,MAGmBI,QAAQ,GAAGJ,EAAE,CAAC,CAAD,CAHhC;;AAIA,MAAIK,cAAc,GAAGV,iBAAiB,EAAtC;AACAD,EAAAA,SAAS,CAAC,YAAY;AAClBW,IAAAA,cAAc,CAACN,MAAD,CAAd,CACKO,IADL,CACU,UAAUC,WAAV,EAAuB;AAC7BH,MAAAA,QAAQ,CAAC;AAAEH,QAAAA,OAAO,EAAE,KAAX;AAAkBC,QAAAA,MAAM,EAAE,IAA1B;AAAgCK,QAAAA,WAAW,EAAEA;AAA7C,OAAD,CAAR;AACH,KAHD,EAIKC,KAJL,CAIW,UAAUC,KAAV,EAAiB;AACxBL,MAAAA,QAAQ,CAAC;AACLH,QAAAA,OAAO,EAAE,KADJ;AAELC,QAAAA,MAAM,EAAE,IAFH;AAGLO,QAAAA,KAAK,EAAEA;AAHF,OAAD,CAAR;AAKH,KAVD;AAWH,GAZQ,EAYN,CAACJ,cAAD,EAAiBN,MAAjB,EAAyBK,QAAzB,CAZM,CAAT;AAaA,SAAOD,KAAP;AACH,CArBD;;AAsBA,eAAeL,cAAf","sourcesContent":["import { useEffect } from 'react';\r\nimport useGetPermissions from './useGetPermissions';\r\nimport { useSafeSetState } from '../util/hooks';\r\nvar emptyParams = {};\r\n/**\r\n * Hook for getting user permissions\r\n *\r\n * Calls the authProvider.getPrmissions() method asynchronously.\r\n * If the authProvider returns a rejected promise, returns empty permissions.\r\n *\r\n * The return value updates according to the request state:\r\n *\r\n * - start: { loading: true, loaded: false }\r\n * - success: { permissions: [any], loading: false, loaded: true }\r\n * - error: { error: [error from provider], loading: false, loaded: true }\r\n *\r\n * Useful to enable features based on user permissions\r\n *\r\n * @param {Object} params Any params you want to pass to the authProvider\r\n *\r\n * @returns The current auth check state. Destructure as { permissions, error, loading, loaded }.\r\n *\r\n * @example\r\n *     import { usePermissions } from 'react-admin';\r\n *\r\n *     const PostDetail = props => {\r\n *         const { loaded, permissions } = usePermissions();\r\n *         if (loaded && permissions == 'editor') {\r\n *             return <PostEdit {...props} />\r\n *         } else {\r\n *             return <PostShow {...props} />\r\n *         }\r\n *     };\r\n */\r\nvar usePermissions = function (params) {\r\n    if (params === void 0) { params = emptyParams; }\r\n    var _a = useSafeSetState({\r\n        loading: true,\r\n        loaded: false,\r\n    }), state = _a[0], setState = _a[1];\r\n    var getPermissions = useGetPermissions();\r\n    useEffect(function () {\r\n        getPermissions(params)\r\n            .then(function (permissions) {\r\n            setState({ loading: false, loaded: true, permissions: permissions });\r\n        })\r\n            .catch(function (error) {\r\n            setState({\r\n                loading: false,\r\n                loaded: true,\r\n                error: error,\r\n            });\r\n        });\r\n    }, [getPermissions, params, setState]);\r\n    return state;\r\n};\r\nexport default usePermissions;\r\n"]},"metadata":{},"sourceType":"module"}