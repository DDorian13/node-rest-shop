{"ast":null,"code":"import { useCallback } from 'react';\nimport { useDelete } from '../../dataProvider';\nimport { CRUD_DELETE } from '../../actions';\nimport { useRefresh, useNotify, useRedirect } from '../../sideEffect';\n/**\r\n * Prepare callback for a Delete button with undo support\r\n *\r\n * @example\r\n *\r\n * import React from 'react';\r\n * import ActionDelete from '@material-ui/icons/Delete';\r\n * import { Button, useDeleteWithUndoController } from 'react-admin';\r\n *\r\n * const DeleteButton = ({\r\n *     resource,\r\n *     record,\r\n *     basePath,\r\n *     redirect,\r\n *     onClick,\r\n *     ...rest\r\n * }) => {\r\n *     const { loading, handleDelete } = useDeleteWithUndoController({\r\n *         resource,\r\n *         record,\r\n *         basePath,\r\n *         redirect,\r\n *         onClick,\r\n *     });\r\n *\r\n *     return (\r\n *         <Button\r\n *             onClick={handleDelete}\r\n *             disabled={loading}\r\n *             label=\"ra.action.delete\"\r\n *             {...rest}\r\n *         >\r\n *             <ActionDelete />\r\n *         </Button>\r\n *     );\r\n * };\r\n */\n\nvar useDeleteWithUndoController = function (_a) {\n  var resource = _a.resource,\n      record = _a.record,\n      basePath = _a.basePath,\n      _b = _a.redirect,\n      redirectTo = _b === void 0 ? 'list' : _b,\n      onClick = _a.onClick,\n      onSuccess = _a.onSuccess,\n      onFailure = _a.onFailure;\n  var notify = useNotify();\n  var redirect = useRedirect();\n  var refresh = useRefresh();\n\n  var _c = useDelete(resource, null, null, {\n    action: CRUD_DELETE,\n    onSuccess: onSuccess !== undefined ? onSuccess : function () {\n      notify('ra.notification.deleted', 'info', {\n        smart_count: 1\n      }, true);\n      redirect(redirectTo, basePath);\n      refresh();\n    },\n    onFailure: onFailure !== undefined ? onFailure : function (error) {\n      return notify(typeof error === 'string' ? error : error.message || 'ra.notification.http_error', 'warning');\n    },\n    undoable: true\n  }),\n      deleteOne = _c[0],\n      loading = _c[1].loading;\n\n  var handleDelete = useCallback(function (event) {\n    event.stopPropagation();\n    deleteOne({\n      payload: {\n        id: record.id,\n        previousData: record\n      }\n    });\n\n    if (typeof onClick === 'function') {\n      onClick(event);\n    }\n  }, [deleteOne, onClick, record]);\n  return {\n    loading: loading,\n    handleDelete: handleDelete\n  };\n};\n\nexport default useDeleteWithUndoController;","map":{"version":3,"sources":["C:/Users/Felhasználó/IdeaProjects/node-rest-shop/client/node_modules/ra-core/esm/controller/button/useDeleteWithUndoController.js"],"names":["useCallback","useDelete","CRUD_DELETE","useRefresh","useNotify","useRedirect","useDeleteWithUndoController","_a","resource","record","basePath","_b","redirect","redirectTo","onClick","onSuccess","onFailure","notify","refresh","_c","action","undefined","smart_count","error","message","undoable","deleteOne","loading","handleDelete","event","stopPropagation","payload","id","previousData"],"mappings":"AAAA,SAASA,WAAT,QAA4B,OAA5B;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,UAAT,EAAqBC,SAArB,EAAgCC,WAAhC,QAAoD,kBAApD;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,IAAIC,2BAA2B,GAAG,UAAUC,EAAV,EAAc;AAC5C,MAAIC,QAAQ,GAAGD,EAAE,CAACC,QAAlB;AAAA,MAA4BC,MAAM,GAAGF,EAAE,CAACE,MAAxC;AAAA,MAAgDC,QAAQ,GAAGH,EAAE,CAACG,QAA9D;AAAA,MAAwEC,EAAE,GAAGJ,EAAE,CAACK,QAAhF;AAAA,MAA0FC,UAAU,GAAGF,EAAE,KAAK,KAAK,CAAZ,GAAgB,MAAhB,GAAyBA,EAAhI;AAAA,MAAoIG,OAAO,GAAGP,EAAE,CAACO,OAAjJ;AAAA,MAA0JC,SAAS,GAAGR,EAAE,CAACQ,SAAzK;AAAA,MAAoLC,SAAS,GAAGT,EAAE,CAACS,SAAnM;AACA,MAAIC,MAAM,GAAGb,SAAS,EAAtB;AACA,MAAIQ,QAAQ,GAAGP,WAAW,EAA1B;AACA,MAAIa,OAAO,GAAGf,UAAU,EAAxB;;AACA,MAAIgB,EAAE,GAAGlB,SAAS,CAACO,QAAD,EAAW,IAAX,EAAiB,IAAjB,EAAuB;AACrCY,IAAAA,MAAM,EAAElB,WAD6B;AAErCa,IAAAA,SAAS,EAAEA,SAAS,KAAKM,SAAd,GACLN,SADK,GAEL,YAAY;AACVE,MAAAA,MAAM,CAAC,yBAAD,EAA4B,MAA5B,EAAoC;AAAEK,QAAAA,WAAW,EAAE;AAAf,OAApC,EAAwD,IAAxD,CAAN;AACAV,MAAAA,QAAQ,CAACC,UAAD,EAAaH,QAAb,CAAR;AACAQ,MAAAA,OAAO;AACV,KARgC;AASrCF,IAAAA,SAAS,EAAEA,SAAS,KAAKK,SAAd,GACLL,SADK,GAEL,UAAUO,KAAV,EAAiB;AACf,aAAON,MAAM,CAAC,OAAOM,KAAP,KAAiB,QAAjB,GACRA,KADQ,GAERA,KAAK,CAACC,OAAN,IAAiB,4BAFV,EAEwC,SAFxC,CAAb;AAGH,KAfgC;AAgBrCC,IAAAA,QAAQ,EAAE;AAhB2B,GAAvB,CAAlB;AAAA,MAiBIC,SAAS,GAAGP,EAAE,CAAC,CAAD,CAjBlB;AAAA,MAiBuBQ,OAAO,GAAGR,EAAE,CAAC,CAAD,CAAF,CAAMQ,OAjBvC;;AAkBA,MAAIC,YAAY,GAAG5B,WAAW,CAAC,UAAU6B,KAAV,EAAiB;AAC5CA,IAAAA,KAAK,CAACC,eAAN;AACAJ,IAAAA,SAAS,CAAC;AACNK,MAAAA,OAAO,EAAE;AAAEC,QAAAA,EAAE,EAAEvB,MAAM,CAACuB,EAAb;AAAiBC,QAAAA,YAAY,EAAExB;AAA/B;AADH,KAAD,CAAT;;AAGA,QAAI,OAAOK,OAAP,KAAmB,UAAvB,EAAmC;AAC/BA,MAAAA,OAAO,CAACe,KAAD,CAAP;AACH;AACJ,GAR6B,EAQ3B,CAACH,SAAD,EAAYZ,OAAZ,EAAqBL,MAArB,CAR2B,CAA9B;AASA,SAAO;AAAEkB,IAAAA,OAAO,EAAEA,OAAX;AAAoBC,IAAAA,YAAY,EAAEA;AAAlC,GAAP;AACH,CAjCD;;AAkCA,eAAetB,2BAAf","sourcesContent":["import { useCallback } from 'react';\r\nimport { useDelete } from '../../dataProvider';\r\nimport { CRUD_DELETE } from '../../actions';\r\nimport { useRefresh, useNotify, useRedirect, } from '../../sideEffect';\r\n/**\r\n * Prepare callback for a Delete button with undo support\r\n *\r\n * @example\r\n *\r\n * import React from 'react';\r\n * import ActionDelete from '@material-ui/icons/Delete';\r\n * import { Button, useDeleteWithUndoController } from 'react-admin';\r\n *\r\n * const DeleteButton = ({\r\n *     resource,\r\n *     record,\r\n *     basePath,\r\n *     redirect,\r\n *     onClick,\r\n *     ...rest\r\n * }) => {\r\n *     const { loading, handleDelete } = useDeleteWithUndoController({\r\n *         resource,\r\n *         record,\r\n *         basePath,\r\n *         redirect,\r\n *         onClick,\r\n *     });\r\n *\r\n *     return (\r\n *         <Button\r\n *             onClick={handleDelete}\r\n *             disabled={loading}\r\n *             label=\"ra.action.delete\"\r\n *             {...rest}\r\n *         >\r\n *             <ActionDelete />\r\n *         </Button>\r\n *     );\r\n * };\r\n */\r\nvar useDeleteWithUndoController = function (_a) {\r\n    var resource = _a.resource, record = _a.record, basePath = _a.basePath, _b = _a.redirect, redirectTo = _b === void 0 ? 'list' : _b, onClick = _a.onClick, onSuccess = _a.onSuccess, onFailure = _a.onFailure;\r\n    var notify = useNotify();\r\n    var redirect = useRedirect();\r\n    var refresh = useRefresh();\r\n    var _c = useDelete(resource, null, null, {\r\n        action: CRUD_DELETE,\r\n        onSuccess: onSuccess !== undefined\r\n            ? onSuccess\r\n            : function () {\r\n                notify('ra.notification.deleted', 'info', { smart_count: 1 }, true);\r\n                redirect(redirectTo, basePath);\r\n                refresh();\r\n            },\r\n        onFailure: onFailure !== undefined\r\n            ? onFailure\r\n            : function (error) {\r\n                return notify(typeof error === 'string'\r\n                    ? error\r\n                    : error.message || 'ra.notification.http_error', 'warning');\r\n            },\r\n        undoable: true,\r\n    }), deleteOne = _c[0], loading = _c[1].loading;\r\n    var handleDelete = useCallback(function (event) {\r\n        event.stopPropagation();\r\n        deleteOne({\r\n            payload: { id: record.id, previousData: record },\r\n        });\r\n        if (typeof onClick === 'function') {\r\n            onClick(event);\r\n        }\r\n    }, [deleteOne, onClick, record]);\r\n    return { loading: loading, handleDelete: handleDelete };\r\n};\r\nexport default useDeleteWithUndoController;\r\n"]},"metadata":{},"sourceType":"module"}