{"ast":null,"code":"import { useCallback } from 'react';\nimport useAuthProvider, { defaultAuthParams } from './useAuthProvider';\nimport useLogout from './useLogout';\nimport useNotify from '../sideEffect/useNotify';\n/**\r\n * Get a callback for calling the authProvider.checkAuth() method.\r\n * In case of rejection, redirects to the login page, displays a notification,\r\n * and throws an error.\r\n *\r\n * This is a low level hook. See those more specialized hooks\r\n * for common authentication tasks, based on useAuthCheck.\r\n *\r\n * @see useAuthenticated\r\n * @see useAuthState\r\n *\r\n * @returns {Function} checkAuth callback\r\n *\r\n * @example\r\n *\r\n * import { useCheckAuth } from 'react-admin';\r\n *\r\n * const MyProtectedPage = () => {\r\n *     const checkAuth = useCheckAuth();\r\n *     useEffect(() => {\r\n *         checkAuth().catch(() => {});\r\n *     }, []);\r\n *     return <p>Private content: EZAEZEZAET</p>\r\n * } // tip: use useAuthenticated() hook instead\r\n *\r\n * const MyPage = () => {\r\n *     const checkAuth = useCheckAuth();\r\n *     const [authenticated, setAuthenticated] = useState(true); // optimistic auth\r\n *     useEffect(() => {\r\n *         checkAuth({}, false)\r\n *              .then(() => setAuthenticated(true))\r\n *              .catch(() => setAuthenticated(false));\r\n *     }, []);\r\n *     return authenticated ? <Bar /> : <BarNotAuthenticated />;\r\n * } // tip: use useAuthState() hook instead\r\n */\n\nvar useCheckAuth = function () {\n  var authProvider = useAuthProvider();\n  var notify = useNotify();\n  var logout = useLogout();\n  var checkAuth = useCallback(function (params, logoutOnFailure, redirectTo, disableNotification) {\n    if (params === void 0) {\n      params = {};\n    }\n\n    if (logoutOnFailure === void 0) {\n      logoutOnFailure = true;\n    }\n\n    if (redirectTo === void 0) {\n      redirectTo = defaultAuthParams.loginUrl;\n    }\n\n    if (disableNotification === void 0) {\n      disableNotification = false;\n    }\n\n    return authProvider.checkAuth(params).catch(function (error) {\n      if (logoutOnFailure) {\n        logout({}, error && error.redirectTo ? error.redirectTo : redirectTo);\n        !disableNotification && notify(getErrorMessage(error, 'ra.auth.auth_check_error'), 'warning');\n      }\n\n      throw error;\n    });\n  }, [authProvider, logout, notify]);\n  return authProvider ? checkAuth : checkAuthWithoutAuthProvider;\n};\n\nvar checkAuthWithoutAuthProvider = function () {\n  return Promise.resolve();\n};\n\nvar getErrorMessage = function (error, defaultMessage) {\n  return typeof error === 'string' ? error : typeof error === 'undefined' || !error.message ? defaultMessage : error.message;\n};\n\nexport default useCheckAuth;","map":{"version":3,"sources":["C:/Users/Felhasználó/IdeaProjects/node-rest-shop/client/node_modules/ra-core/esm/auth/useCheckAuth.js"],"names":["useCallback","useAuthProvider","defaultAuthParams","useLogout","useNotify","useCheckAuth","authProvider","notify","logout","checkAuth","params","logoutOnFailure","redirectTo","disableNotification","loginUrl","catch","error","getErrorMessage","checkAuthWithoutAuthProvider","Promise","resolve","defaultMessage","message"],"mappings":"AAAA,SAASA,WAAT,QAA4B,OAA5B;AACA,OAAOC,eAAP,IAA0BC,iBAA1B,QAAmD,mBAAnD;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,IAAIC,YAAY,GAAG,YAAY;AAC3B,MAAIC,YAAY,GAAGL,eAAe,EAAlC;AACA,MAAIM,MAAM,GAAGH,SAAS,EAAtB;AACA,MAAII,MAAM,GAAGL,SAAS,EAAtB;AACA,MAAIM,SAAS,GAAGT,WAAW,CAAC,UAAUU,MAAV,EAAkBC,eAAlB,EAAmCC,UAAnC,EAA+CC,mBAA/C,EAAoE;AAC5F,QAAIH,MAAM,KAAK,KAAK,CAApB,EAAuB;AAAEA,MAAAA,MAAM,GAAG,EAAT;AAAc;;AACvC,QAAIC,eAAe,KAAK,KAAK,CAA7B,EAAgC;AAAEA,MAAAA,eAAe,GAAG,IAAlB;AAAyB;;AAC3D,QAAIC,UAAU,KAAK,KAAK,CAAxB,EAA2B;AAAEA,MAAAA,UAAU,GAAGV,iBAAiB,CAACY,QAA/B;AAA0C;;AACvE,QAAID,mBAAmB,KAAK,KAAK,CAAjC,EAAoC;AAAEA,MAAAA,mBAAmB,GAAG,KAAtB;AAA8B;;AACpE,WAAOP,YAAY,CAACG,SAAb,CAAuBC,MAAvB,EAA+BK,KAA/B,CAAqC,UAAUC,KAAV,EAAiB;AACzD,UAAIL,eAAJ,EAAqB;AACjBH,QAAAA,MAAM,CAAC,EAAD,EAAKQ,KAAK,IAAIA,KAAK,CAACJ,UAAf,GACLI,KAAK,CAACJ,UADD,GAELA,UAFA,CAAN;AAGA,SAACC,mBAAD,IACIN,MAAM,CAACU,eAAe,CAACD,KAAD,EAAQ,0BAAR,CAAhB,EAAqD,SAArD,CADV;AAEH;;AACD,YAAMA,KAAN;AACH,KATM,CAAP;AAUH,GAf0B,EAexB,CAACV,YAAD,EAAeE,MAAf,EAAuBD,MAAvB,CAfwB,CAA3B;AAgBA,SAAOD,YAAY,GAAGG,SAAH,GAAeS,4BAAlC;AACH,CArBD;;AAsBA,IAAIA,4BAA4B,GAAG,YAAY;AAAE,SAAOC,OAAO,CAACC,OAAR,EAAP;AAA2B,CAA5E;;AACA,IAAIH,eAAe,GAAG,UAAUD,KAAV,EAAiBK,cAAjB,EAAiC;AACnD,SAAO,OAAOL,KAAP,KAAiB,QAAjB,GACDA,KADC,GAED,OAAOA,KAAP,KAAiB,WAAjB,IAAgC,CAACA,KAAK,CAACM,OAAvC,GACID,cADJ,GAEIL,KAAK,CAACM,OAJhB;AAKH,CAND;;AAOA,eAAejB,YAAf","sourcesContent":["import { useCallback } from 'react';\r\nimport useAuthProvider, { defaultAuthParams } from './useAuthProvider';\r\nimport useLogout from './useLogout';\r\nimport useNotify from '../sideEffect/useNotify';\r\n/**\r\n * Get a callback for calling the authProvider.checkAuth() method.\r\n * In case of rejection, redirects to the login page, displays a notification,\r\n * and throws an error.\r\n *\r\n * This is a low level hook. See those more specialized hooks\r\n * for common authentication tasks, based on useAuthCheck.\r\n *\r\n * @see useAuthenticated\r\n * @see useAuthState\r\n *\r\n * @returns {Function} checkAuth callback\r\n *\r\n * @example\r\n *\r\n * import { useCheckAuth } from 'react-admin';\r\n *\r\n * const MyProtectedPage = () => {\r\n *     const checkAuth = useCheckAuth();\r\n *     useEffect(() => {\r\n *         checkAuth().catch(() => {});\r\n *     }, []);\r\n *     return <p>Private content: EZAEZEZAET</p>\r\n * } // tip: use useAuthenticated() hook instead\r\n *\r\n * const MyPage = () => {\r\n *     const checkAuth = useCheckAuth();\r\n *     const [authenticated, setAuthenticated] = useState(true); // optimistic auth\r\n *     useEffect(() => {\r\n *         checkAuth({}, false)\r\n *              .then(() => setAuthenticated(true))\r\n *              .catch(() => setAuthenticated(false));\r\n *     }, []);\r\n *     return authenticated ? <Bar /> : <BarNotAuthenticated />;\r\n * } // tip: use useAuthState() hook instead\r\n */\r\nvar useCheckAuth = function () {\r\n    var authProvider = useAuthProvider();\r\n    var notify = useNotify();\r\n    var logout = useLogout();\r\n    var checkAuth = useCallback(function (params, logoutOnFailure, redirectTo, disableNotification) {\r\n        if (params === void 0) { params = {}; }\r\n        if (logoutOnFailure === void 0) { logoutOnFailure = true; }\r\n        if (redirectTo === void 0) { redirectTo = defaultAuthParams.loginUrl; }\r\n        if (disableNotification === void 0) { disableNotification = false; }\r\n        return authProvider.checkAuth(params).catch(function (error) {\r\n            if (logoutOnFailure) {\r\n                logout({}, error && error.redirectTo\r\n                    ? error.redirectTo\r\n                    : redirectTo);\r\n                !disableNotification &&\r\n                    notify(getErrorMessage(error, 'ra.auth.auth_check_error'), 'warning');\r\n            }\r\n            throw error;\r\n        });\r\n    }, [authProvider, logout, notify]);\r\n    return authProvider ? checkAuth : checkAuthWithoutAuthProvider;\r\n};\r\nvar checkAuthWithoutAuthProvider = function () { return Promise.resolve(); };\r\nvar getErrorMessage = function (error, defaultMessage) {\r\n    return typeof error === 'string'\r\n        ? error\r\n        : typeof error === 'undefined' || !error.message\r\n            ? defaultMessage\r\n            : error.message;\r\n};\r\nexport default useCheckAuth;\r\n"]},"metadata":{},"sourceType":"module"}